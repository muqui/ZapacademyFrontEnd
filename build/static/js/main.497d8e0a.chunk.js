(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{32:function(e,t,a){},38:function(e,t,a){e.exports=a(69)},44:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(33),o=a.n(r),c=(a(43),a(44),a(1)),s=a(2),i=a(4),u=a(3),m=a(5),h=a(7),d=a(13),p=a(15),b=a(11),v=a(17),g=function(e){function t(e){var a;Object(c.a)(this,t);return(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",loggedIn:!1},a.onChange=a.onChange.bind(Object(b.a)(a)),a.handleOnAddUser=a.handleOnAddUser.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"handleOnAddUser",value:function(e){var t=this,a=this.state,n=a.email,l=a.password;e.preventDefault(),v.post("https://zapacademy.herokuapp.com/login",{headers:{"Access-Control-Allow-Origin":"*"},password:l,email:n}).then((function(e){var a=e.data.token;if("undefined"!==typeof a){var n=e.data.user.id;localStorage.setItem("token",a),localStorage.setItem("id",n),console.log("ID = "+n),t.setState({loggedIn:!0})}}))}},{key:"render",value:function(){return this.state.loggedIn?l.a.createElement(d.a,{to:"/admin"}):l.a.createElement("div",null,l.a.createElement("h1",null,"Formulario"),l.a.createElement("form",{onSubmit:this.handleOnAddUser},l.a.createElement("input",{type:"email",placeholder:"email",name:"email",value:this.state.email,onChange:this.onChange}),l.a.createElement("input",{type:"text",placeholder:"password",name:"password",value:this.state.password,onChange:this.onChange}),l.a.createElement("input",{type:"submit",value:"Entrar"})))}}]),t}(n.Component),E=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",null,l.a.createElement(h.b,{to:"/event",className:"nav-link"},"Crear evento")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/events",className:"nav-link"},"Eventos")),l.a.createElement("li",null,l.a.createElement(h.b,{to:"/logout",className:"nav-link"},"Salir"))))}}]),t}(n.Component),f=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e));var n=!0;return null==localStorage.getItem("token")&&(n=!1),a.state={loggedIn:n},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return!1===this.state.loggedIn?l.a.createElement(d.a,{to:"/"}):l.a.createElement("div",null,l.a.createElement(E,null),l.a.createElement("h2",null,"This is a Admin Page. Only Auth people   can see this."),l.a.createElement(h.b,{to:"/logout"},"Logout"))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e)),localStorage.removeItem("token"),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h2",null,"You have been logged out "))}}]),t}(n.Component),j=a(17),C=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e)),j.defaults.headers.common={Authorization:"bearer ".concat(localStorage.getItem("token"))};var n=!0;return null==localStorage.getItem("token")&&(n=!1),a.state={disabled:!1,nombre:"",fecha_inicio:"",lugar:"",fecha_fin:"",loggedIn:n},a.onChange=a.onChange.bind(Object(b.a)(a)),a.handleOnAddUser=a.handleOnAddUser.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"handleOnAddUser",value:function(e){e.preventDefault(),this.refs.btn.setAttribute("disabled","disabled");var t=this;this.value=!0;var a=this.state,n=a.nombre,l=a.fecha_inicio,r=a.fecha_fin,o=a.lugar,c=localStorage.getItem("id");console.log("ID  "+c),console.log("token"+localStorage.getItem("token")),j.post("https://zapacademy.herokuapp.com/evento",{headers:{"Access-Control-Allow-Origin":"*",Authorization:"bearer ".concat(localStorage.getItem("token"))},nombre:n,fecha_inicio:l,fecha_fin:r,lugar:o,id:c}).then((function(e){t.setState({disabled:!1}),console.log(e),t.refs.btn.removeAttribute("disabled")}))}},{key:"render",value:function(){return console.log("token en event ==="+localStorage.getItem("token")),!1===this.state.loggedIn?l.a.createElement(d.a,{to:"/"}):l.a.createElement("div",null,l.a.createElement(E,null),l.a.createElement("h1",null,"Crear evento"),l.a.createElement("form",{onSubmit:this.handleOnAddUser},l.a.createElement("div",{class:"input-group mb-3"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nombre",name:"nombre",value:this.state.nombre,onChange:this.onChange})),l.a.createElement("div",{class:"input-group mb-3"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"lugar",name:"lugar",value:this.state.lugar,onChange:this.onChange})),l.a.createElement("div",{class:"input-group mb-3"},l.a.createElement("input",{type:"date",className:"form-control",placeholder:"Fecha inicio",name:"fecha_inicio",value:this.state.fecha_inicio,onChange:this.onChange})),l.a.createElement("div",{class:"input-group mb-3"},l.a.createElement("input",{type:"date",className:"form-control",placeholder:"Fecha Fin",name:"fecha_fin",value:this.state.fecha_fin,onChange:this.onChange})),l.a.createElement("input",{type:"submit",class:"btn btn-primary",ref:"btn",value:"Crear Evento"})))}}]),t}(n.Component),y=a(21),k=a.n(y),S=a(36),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.props.onSelectChange(t)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.arrayOfData.map((function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.nombre)}));return l.a.createElement("select",{name:"customSearch",className:"custom-search-select",onChange:this.handleChange},l.a.createElement("option",null,"Select Item"),e)}}]),t}(n.Component),w=function(e){return l.a.createElement("div",null,l.a.createElement("div",{className:"modal-wrapper",style:{transform:e.show?"translateY(0vh)":"translateY(-100vh)",opacity:e.show?"1":"0"}},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h3",null," ",e.image),l.a.createElement("span",{className:"close-modal-btn",onClick:e.close},"\xd7")),l.a.createElement("div",{className:"modal-body"},l.a.createElement("img",{src:"https://zapacademy.herokuapp.com/"+e.image+".jpg",width:"400px",height:"500px"}),l.a.createElement("p",null,e.children)),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{className:"btn-cancel",onClick:e.close},"CERRAR"))))},N=(a(32),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).openModalHandler=function(e){a.setState({isShowing:!0,image:e})},a.closeModalHandler=function(){a.setState({isShowing:!1})},a.state={isShowing:!1,selectListEvent:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.events;return l.a.createElement("div",null,l.a.createElement("table",{className:"table table-striped"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"CURP"),l.a.createElement("th",null,"Nombre"),l.a.createElement("th",null,"Primer Apellido"),l.a.createElement("th",null,"Segundo Apellido"),l.a.createElement("th",null,"status"),l.a.createElement("th",null,"Evidencia")),t.map((function(t){return l.a.createElement("tr",null,l.a.createElement("td",{scope:"row"},t.CURP),l.a.createElement("td",null,t.nombre),l.a.createElement("td",null,t.apellido_paterno),l.a.createElement("td",null,t.apellido_materno),l.a.createElement("td",null,t.status?"asistio":"No asistio"," "),l.a.createElement("td",null," ",l.a.createElement("button",{disabled:!t.status,onClick:e.openModalHandler},t.status?"Evidencia":"Sin evidencia")," "))}))),l.a.createElement(w,{className:"modal",show:this.state.isShowing,close:this.closeModalHandler},"Maybe aircrafts fly very high because they don't want to be seen in plane sight?"))}}]),t}(n.Component)),I=a(17),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSelectChange=function(){var e=Object(S.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({selectedValue:t});case 2:return e.next=4,a.listaEventos();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={selectedValue:"Nothing selected",selectListEvent:[],events:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"listaEventos",value:function(){var e=this,t="https://zapacademy.herokuapp.com/evento/eventos/"+this.state.selectedValue;console.log("Busqueda "+this.state.selectedValue),I.get(t,{headers:{"Access-Control-Allow-Origin":"*",Authorization:"bearer ".concat(localStorage.getItem("token"))}}).then((function(t){var a=t.data;return e.setState({selectListEvent:a}),console.log(t.data),a})),console.log("GET")}},{key:"componentDidMount",value:function(){var e=this;I.get("https://zapacademy.herokuapp.com/evento/eventos",{headers:{"Access-Control-Allow-Origin":"*",Authorization:"bearer ".concat(localStorage.getItem("token"))}}).then((function(t){var a=t.data;e.setState({events:a})})),console.log("GET")}},{key:"render",value:function(){return!1===this.state.loggedIn?l.a.createElement(d.a,{to:"/"}):l.a.createElement("div",{className:"App"},l.a.createElement(E,null),l.a.createElement("header",{className:"App-header"},l.a.createElement("h1",{className:"App-title"},"Lista de eventos.")),l.a.createElement("p",{className:"App-intro"},l.a.createElement(A,{arrayOfData:this.state.events,onSelectChange:this.handleSelectChange})," ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(N,{events:this.state.selectListEvent}))))}}]),t}(n.Component),x=a(37),_=a.n(x),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={isShowing:!1,selectListEvent:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.events;return l.a.createElement("div",{className:"container mt-3"},l.a.createElement("table",{className:"table table-striped"},l.a.createElement("tr",null,l.a.createElement("th",null,"Nombre"),l.a.createElement("th",null,"FECHA"),l.a.createElement("th",null,"LUGAR")),e.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.nombreEvento),l.a.createElement("td",null,_()(e.fechaInicio).format("DD/MM/YYYY")," "),l.a.createElement("td",null,e.lugar))}))))}}]),t}(n.Component),z=a(17),D=function(e){function t(e){var a;Object(c.a)(this,t);return(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={curp:"",selectListEvent:[]},a.onChange=a.onChange.bind(Object(b.a)(a)),a.handleOnAddUser=a.handleOnAddUser.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"handleOnAddUser",value:function(e){e.preventDefault();var t=this,a="https://zapacademy.herokuapp.com/beneficiarios/"+this.state.curp;z.get(a,{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){var a=e.data;return t.setState({selectListEvent:a}),console.log(e.data),a})),console.log("GET")}},{key:"render",value:function(){return l.a.createElement("div",{className:"container mt-3"},l.a.createElement("form",{onSubmit:this.handleOnAddUser},l.a.createElement("label",null,"Capture su CURP para verificar su evento"),l.a.createElement("div",{class:"input-group mb-3"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"CURP",name:"curp",value:this.state.curp,onChange:this.onChange})),l.a.createElement("input",{type:"submit",class:"btn btn-primary",value:"Buscar"})),l.a.createElement(L,{className:"form-control",events:this.state.selectListEvent}))}}]),t}(n.Component),M=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement(h.a,null,l.a.createElement(d.d,null,l.a.createElement(d.b,{exact:!0,path:"/",component:D}),l.a.createElement(d.b,{exact:!0,path:"/login",component:g}),l.a.createElement(d.b,{path:"/event",component:C}),l.a.createElement(d.b,{path:"/events",component:U}),l.a.createElement(d.b,{path:"/admin",component:f}),l.a.createElement(d.b,{path:"/logout",component:O})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.497d8e0a.chunk.js.map